### Udeploy Production Server Cleanup Document

**Document Title:** Udeploy Production Server Cleanup Procedure

**Purpose:**  
This document outlines the procedure for cleaning up specific directories on the Udeploy production server to manage disk space efficiently. The paths covered in this document are:
- `/appbin/IBM/ucd/server/var/repository/blob/data`
- `iBM/UCD/server/var/sa/dialogue`
- `iBM/UCD/server/archieve`
- `iBM/UCD/server/logs/store`

**Overview:**  
Regular cleanup of these directories is essential to ensure the server runs smoothly without running out of disk space. This document provides an overview of each path, the type of data it contains, and guidelines on how to determine what data can be safely removed.

---

#### 1. Path: `/appbin/IBM/ucd/server/var/repository/blob/data`

**Description:**  
This directory contains blob data, including deployment packages, artifacts, and metadata used by IBM UrbanCode Deploy.

**Cleanup Guidelines:**
- **Retention Policy:** Retain the most recent 6 months of deployment artifacts.
- **Old Data Removal:** Identify and delete artifacts older than 6 months.
- **Verification:** Ensure that no active or future deployments rely on the artifacts being deleted.

**Head Snapshot:**  
Before cleanup, list the contents with timestamps and sizes:
```sh
ls -lh /appbin/IBM/ucd/server/var/repository/blob/data
```

**Tail Snapshot:**  
After cleanup, list the contents again to verify:
```sh
ls -lh /appbin/IBM/ucd/server/var/repository/blob/data
```

---

#### 2. Path: `iBM/UCD/server/var/sa/dialogue`

**Description:**  
This directory contains dialogue files related to server communication and automation processes in Udeploy.

**Cleanup Guidelines:**
- **Retention Policy:** Retain the most recent 3 months of dialogue files.
- **Old Data Removal:** Identify and delete dialogue files older than 3 months.
- **Verification:** Ensure that no ongoing automation processes require the files being deleted.

**Head Snapshot:**  
Before cleanup, list the contents with timestamps and sizes:
```sh
ls -lh iBM/UCD/server/var/sa/dialogue
```

**Tail Snapshot:**  
After cleanup, list the contents again to verify:
```sh
ls -lh iBM/UCD/server/var/sa/dialogue
```

---

#### 3. Path: `iBM/UCD/server/archieve`

**Description:**  
This directory stores archived data, which may include old logs, reports, or other historical data.

**Cleanup Guidelines:**
- **Retention Policy:** Retain the most recent 1 year of archived data.
- **Old Data Removal:** Identify and delete archived data older than 1 year.
- **Verification:** Confirm that the data being deleted is not needed for compliance or audit purposes.

**Head Snapshot:**  
Before cleanup, list the contents with timestamps and sizes:
```sh
ls -lh iBM/UCD/server/archieve
```

**Tail Snapshot:**  
After cleanup, list the contents again to verify:
```sh
ls -lh iBM/UCD/server/archieve
```

---

#### 4. Path: `iBM/UCD/server/logs/store`

**Description:**  
This directory contains log files generated by the Udeploy server.

**Cleanup Guidelines:**
- **Retention Policy:** Retain the most recent 6 months of logs.
- **Old Data Removal:** Identify and delete logs older than 6 months.
- **Verification:** Ensure that the logs being deleted are not required for troubleshooting or audit purposes.

**Head Snapshot:**  
Before cleanup, list the contents with timestamps and sizes:
```sh
ls -lh iBM/UCD/server/logs/store
```

**Tail Snapshot:**  
After cleanup, list the contents again to verify:
```sh
ls -lh iBM/UCD/server/logs/store
```

---

**Procedure:**

1. **Backup Data:**
   - Before performing any deletions, ensure that critical data is backed up.
   - Use a secure backup location to store copies of the data being removed.

2. **Identify Old Data:**
   - Use the `find` command to list files older than the retention policy.
   - Example command for finding files older than 6 months:
     ```sh
     find /path/to/directory -type f -mtime +180
     ```

3. **Delete Old Data:**
   - Carefully review the list of files to be deleted.
   - Use the `rm` command to remove old files:
     ```sh
     rm /path/to/old/file
     ```

4. **Verify Cleanup:**
   - After deleting the files, verify that the directory sizes have reduced.
   - Take snapshots of the directory contents before and after cleanup to document the changes.

**Current Status:**
- The `/appbin` directory has a total capacity of 12TB, with 9.3TB currently filled. To manage this space effectively, consider increasing the filesystem size.
- We have collected 2GB of old components from Udeploy, sent a confirmation email to the app team, received replies from some team members, and raised a RITM to clean up those components for which confirmation was received.

**Approval:**
- Obtain necessary approvals from the application team before proceeding with the cleanup.
- Ensure that the cleanup process is documented and reviewed periodically.

**Notes:**
- Regularly review and update the retention policies based on business needs and compliance requirements.
- Automate the cleanup process where possible to maintain consistency and efficiency.

---

**Document Version:** 1.0  
**Prepared by:** [Your Name]  
**Date:** [Current Date]
