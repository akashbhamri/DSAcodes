Here is the complete and final version of your document with all updates and clarifications:


---

Issue Subject: Bitbucket Outage Due to Prolonged DB Index Rebuild – Root Cause Inconclusive


---

Issue Summary:
On May 13, 2023, Bitbucket experienced slow page load times starting at 7:00 PM EST, which escalated to SQL connection timeouts and a complete service outage by 7:15 PM. The application remained unavailable until 9:00 PM EST. The DBA team had to manually terminate the index rebuild job and restart the database service to restore normal operations.


---

Technical Details & Observations:

A scheduled database index rebuild job was initiated at 7:00 PM EST to optimize database performance.

Although the job typically completes within 6–7 minutes, it ran for nearly 1 hour and 45 minutes due to a high volume of active commit transactions from Bitbucket to the database.

The prolonged duration caused significant blocking in the database, leading to delayed or failed queries and ultimately causing SQL connection timeouts.

Investigation revealed that the overlap between the index rebuild and high application load led to the outage. However, the exact root cause that triggered such a prolonged delay could not be conclusively identified.



---

Actions Taken:

The DBA team forcefully terminated the long-running index rebuild job.

Database services were restarted, and Bitbucket functionality was restored successfully post-restart.



---

Next Steps / Preventive Measures:

Going forward, index rebuild jobs will be scheduled during non-peak hours to minimize impact, preferably when Bitbucket usage is low.

Job execution will be closely monitored, and alerts will be configured to detect abnormal durations.

Notifications (with job ID, duration, and outcome) will be shared before and after the execution to ensure better visibility and coordination.



---

Additional Notes:

The DB team does not retain query execution data once a query completes, which limited our ability to perform a deeper investigation and identify the exact root cause.

However, we have requested them to set up alerts that capture query completion time and other execution details. This setup is currently being tested in the test environment and will be rolled out to Dev and Prod environments respectively.



---

Let me know if you'd like this exported as a Word or PDF document.

