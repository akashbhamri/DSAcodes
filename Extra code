#!/bin/bash

# URLs for the services
BITBUCKET_URL="https://bitbucket.example.com"
UDEPLOY_URL="https://udeploy.example.com"
NEXUS_URL="https://nexus.example.com"
CLOUDBEES_URL="https://cloudbees.example.com"

# Function to check connectivity
check_connectivity() {
    local url=$1
    echo "Checking connectivity to $url..."
    if curl --head "$url" 2>/dev/null | head -n 1 | grep "HTTP/1.[01] [23].." >/dev/null; then
        echo "Connectivity to $url is OK."
    else
        echo "ERROR: Connectivity to $url failed."
        exit 1
    fi
}

# Perform connectivity checks
check_connectivity "$BITBUCKET_URL"
check_connectivity "$UDEPLOY_URL"
check_connectivity "$NEXUS_URL"
check_connectivity "$CLOUDBEES_URL"

echo "All connectivity checks passed."
