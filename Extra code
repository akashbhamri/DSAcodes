# Define Jenkins API URL
JENKINS_URL="https://your-jenkins-url"
API_ENDPOINT="/api/json"
USERNAME="your-username"
API_TOKEN="your-api-token"

# Make the API call and save the response
RESPONSE=$(curl -s -u $USERNAME:$API_TOKEN $JENKINS_URL$API_ENDPOINT)

# Check if the response contains expected data (e.g., 'jobs' field)
if echo "$RESPONSE" | grep -q '"jobs"'; then
  echo "API call successful. Jenkins jobs data retrieved."
else
  echo "API call failed or did not return expected data."
  exit 1  # Exit with a non-zero status to mark the build as failed
fi
