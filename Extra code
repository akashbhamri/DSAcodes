Root Cause Analysis (RCA)

Incident Summary:

Incident Number: INC3926687

Issue: Bitbucket was inaccessible due to a locked DATABSECHANGELOGLOCK table in the database, which blocked essential operations required for Bitbucket’s functionality.

Duration: The issue was identified and resolved by the SQL DBA team at 02:19 AM IST (03:49 PM EST).



---

Root Cause:

The root cause of the incident was that the DATABSECHANGELOGLOCK table remained in a locked state (LOCKED=1), which prevented database changes and blocked Bitbucket from functioning. The lock was left unreleased due to an incomplete or failed database process.

Additionally, there was high traffic on Bitbucket between 7:00 PM and 9:00 PM IST (8:30 AM – 10:30 AM EST), which may have contributed to the problem. The platform team is actively working with the vendor (Atlassian) to investigate the impact of this traffic and determine if it played a role in causing the lock.


---

Resolution:

1. The SQL DBA team manually cleared the lock by running the following SQL query:

UPDATE DATABSECHANGELOGLOCK SET LOCKED = 0, LOCKEDBY = NULL WHERE ID = 1;


2. Once the lock was reset, Bitbucket became accessible again.


3. The DevOps team verified the application’s functionality, and operations resumed normally.


4. Logs were shared with Atlassian (Vendor Case PSSRV-157323) for further investigation.




---

Impact:

Affected Service: Bitbucket

Business Impact: Deployment teams were unable to push or access code repositories during the incident window.



---

Preventive Actions:

1. Monitor DATABSECHANGELOGLOCK: Implement alerting for prolonged locks to enable quick detection and response.


2. Traffic Analysis: Collaborate with the platform team and vendor to monitor and manage high traffic periods effectively.


3. Automate Lock Recovery: Develop scripts to detect and release stale locks automatically.


4. Database Process Review: Ensure proper handling of locks during failures in all update processes.




---

Let me know if you need a polished version or in a specific format!

